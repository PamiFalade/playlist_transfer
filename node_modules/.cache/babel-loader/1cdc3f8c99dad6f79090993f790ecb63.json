{"ast":null,"code":"import { Buffer } from \"buffer\"; //List used to store the clientIDs and secrets of the various platforms\n\nconst credentials = {\n  spotify_clientID: \"9a5c9f439d464286b0b08e0f40de4f4a\",\n  spotify_secret: \"c24f98c34e26485db177b530895c1769\",\n  spotify_token: \"\",\n  apple_clientID: \"\",\n  apple_secret: \"\",\n  apple_token: \"\"\n}; //This function sets up the clientID and secret depending on which platform is specified\n\nconst setupCredentials = source => {\n  let required_clientID = `credentials.${source}_clientID`;\n  let required_secret = `credentials.${source}_secret`;\n  return {\n    clientID: `${required_clientID}`,\n    secret: `${required_secret}`\n  };\n}; //Get the Spotify access token\n\n\nconst fetchSpotifyToken = searchData => {\n  let token = \"\"; //The Spotify token will be returned with this variable\n\n  let stringToEncode = `${searchData.clientID}:${searchData.secret}`; //Encoded client ID and secret needed to get access token\n  //Headers and body set up according to how Spotify requires it (https://developer.spotify.com/documentation/general/guides/authorization/client-credentials/)\n\n  fetch(\"https://accounts.spotify.com/api/token\", {\n    method: \"POST\",\n    headers: {\n      \"Content-type\": \"application/x-www-form-urlencoded\",\n      Authorization: `Basic ${Buffer.from(`${searchData.clientID}` + \":\" + `${searchData.secret}`).toString(\"base64\")}`\n    },\n    body: \"grant_type=client_credentials\"\n  }).then(tokenResponse => {\n    if (tokenResponse.ok) console.log(\"Successful\");else console.log(\"Not successful\");\n    return tokenResponse.json(); //Response body comes as a \"readable stream\". Need to convert the response to json to be able to read the data\n  }).then(data => {\n    console.log(data);\n  }).catch(error => {\n    console.log(error);\n  });\n  return token;\n}; //Get the Apple Music access token\n\n\nconst fetchAppleToken = searchData => {};\n\nexport const setupToken = source => {\n  let searchData = setupCredentials(source); //Object containing the required clientID and secret\n\n  let token = \"\"; //Variable used to hold access token from source platform\n  //Get the access token from the right api based on the source\n\n  if (source === \"spotify\") {\n    token = fetchSpotifyToken(searchData);\n  } else if (source === \"apple\") {\n    token = fetchAppleToken(searchData);\n  }\n\n  return { ...searchData,\n    token\n  };\n};","map":{"version":3,"sources":["/Users/pamilerinfalade/Desktop/FrontEnd_Challenges/playlist_transfer/src/models/webService.js"],"names":["Buffer","credentials","spotify_clientID","spotify_secret","spotify_token","apple_clientID","apple_secret","apple_token","setupCredentials","source","required_clientID","required_secret","clientID","secret","fetchSpotifyToken","searchData","token","stringToEncode","fetch","method","headers","Authorization","from","toString","body","then","tokenResponse","ok","console","log","json","data","catch","error","fetchAppleToken","setupToken"],"mappings":"AAAA,SAASA,MAAT,QAAuB,QAAvB,C,CAEA;;AACA,MAAMC,WAAW,GAAG;AAClBC,EAAAA,gBAAgB,EAAE,kCADA;AAElBC,EAAAA,cAAc,EAAE,kCAFE;AAGlBC,EAAAA,aAAa,EAAE,EAHG;AAIlBC,EAAAA,cAAc,EAAE,EAJE;AAKlBC,EAAAA,YAAY,EAAE,EALI;AAMlBC,EAAAA,WAAW,EAAE;AANK,CAApB,C,CASA;;AACA,MAAMC,gBAAgB,GAAIC,MAAD,IAAY;AACnC,MAAIC,iBAAiB,GAAI,eAAcD,MAAO,WAA9C;AACA,MAAIE,eAAe,GAAI,eAAcF,MAAO,SAA5C;AAEA,SAAO;AAAEG,IAAAA,QAAQ,EAAG,GAAEF,iBAAkB,EAAjC;AAAoCG,IAAAA,MAAM,EAAG,GAAEF,eAAgB;AAA/D,GAAP;AACD,CALD,C,CAOA;;;AACA,MAAMG,iBAAiB,GAAIC,UAAD,IAAgB;AACxC,MAAIC,KAAK,GAAG,EAAZ,CADwC,CACxB;;AAChB,MAAIC,cAAc,GAAI,GAAEF,UAAU,CAACH,QAAS,IAAGG,UAAU,CAACF,MAAO,EAAjE,CAFwC,CAE4B;AAEpE;;AACAK,EAAAA,KAAK,CAAC,wCAAD,EAA2C;AAC9CC,IAAAA,MAAM,EAAE,MADsC;AAE9CC,IAAAA,OAAO,EAAE;AACP,sBAAgB,mCADT;AAEPC,MAAAA,aAAa,EAAG,SAAQrB,MAAM,CAACsB,IAAP,CACrB,GAAEP,UAAU,CAACH,QAAS,EAAvB,GAA2B,GAA3B,GAAkC,GAAEG,UAAU,CAACF,MAAO,EADhC,EAEtBU,QAFsB,CAEb,QAFa,CAEH;AAJd,KAFqC;AAQ9CC,IAAAA,IAAI,EAAE;AARwC,GAA3C,CAAL,CAUGC,IAVH,CAUSC,aAAD,IAAmB;AACvB,QAAIA,aAAa,CAACC,EAAlB,EAAsBC,OAAO,CAACC,GAAR,CAAY,YAAZ,EAAtB,KACKD,OAAO,CAACC,GAAR,CAAY,gBAAZ;AACL,WAAOH,aAAa,CAACI,IAAd,EAAP,CAHuB,CAGM;AAC9B,GAdH,EAeGL,IAfH,CAeSM,IAAD,IAAU;AACdH,IAAAA,OAAO,CAACC,GAAR,CAAYE,IAAZ;AACD,GAjBH,EAkBGC,KAlBH,CAkBUC,KAAD,IAAW;AAChBL,IAAAA,OAAO,CAACC,GAAR,CAAYI,KAAZ;AACD,GApBH;AAsBA,SAAOjB,KAAP;AACD,CA5BD,C,CA8BA;;;AACA,MAAMkB,eAAe,GAAInB,UAAD,IAAgB,CAAE,CAA1C;;AAEA,OAAO,MAAMoB,UAAU,GAAI1B,MAAD,IAAY;AACpC,MAAIM,UAAU,GAAGP,gBAAgB,CAACC,MAAD,CAAjC,CADoC,CACO;;AAC3C,MAAIO,KAAK,GAAG,EAAZ,CAFoC,CAEpB;AAEhB;;AACA,MAAIP,MAAM,KAAK,SAAf,EAA0B;AACxBO,IAAAA,KAAK,GAAGF,iBAAiB,CAACC,UAAD,CAAzB;AACD,GAFD,MAEO,IAAIN,MAAM,KAAK,OAAf,EAAwB;AAC7BO,IAAAA,KAAK,GAAGkB,eAAe,CAACnB,UAAD,CAAvB;AACD;;AAED,SAAO,EAAE,GAAGA,UAAL;AAAiBC,IAAAA;AAAjB,GAAP;AACD,CAZM","sourcesContent":["import { Buffer } from \"buffer\";\n\n//List used to store the clientIDs and secrets of the various platforms\nconst credentials = {\n  spotify_clientID: \"9a5c9f439d464286b0b08e0f40de4f4a\",\n  spotify_secret: \"c24f98c34e26485db177b530895c1769\",\n  spotify_token: \"\",\n  apple_clientID: \"\",\n  apple_secret: \"\",\n  apple_token: \"\",\n};\n\n//This function sets up the clientID and secret depending on which platform is specified\nconst setupCredentials = (source) => {\n  let required_clientID = `credentials.${source}_clientID`;\n  let required_secret = `credentials.${source}_secret`;\n\n  return { clientID: `${required_clientID}`, secret: `${required_secret}` };\n};\n\n//Get the Spotify access token\nconst fetchSpotifyToken = (searchData) => {\n  let token = \"\"; //The Spotify token will be returned with this variable\n  let stringToEncode = `${searchData.clientID}:${searchData.secret}`; //Encoded client ID and secret needed to get access token\n\n  //Headers and body set up according to how Spotify requires it (https://developer.spotify.com/documentation/general/guides/authorization/client-credentials/)\n  fetch(\"https://accounts.spotify.com/api/token\", {\n    method: \"POST\",\n    headers: {\n      \"Content-type\": \"application/x-www-form-urlencoded\",\n      Authorization: `Basic ${Buffer.from(\n        `${searchData.clientID}` + \":\" + `${searchData.secret}`\n      ).toString(\"base64\")}`,\n    },\n    body: \"grant_type=client_credentials\",\n  })\n    .then((tokenResponse) => {\n      if (tokenResponse.ok) console.log(\"Successful\");\n      else console.log(\"Not successful\");\n      return tokenResponse.json(); //Response body comes as a \"readable stream\". Need to convert the response to json to be able to read the data\n    })\n    .then((data) => {\n      console.log(data);\n    })\n    .catch((error) => {\n      console.log(error);\n    });\n\n  return token;\n};\n\n//Get the Apple Music access token\nconst fetchAppleToken = (searchData) => {};\n\nexport const setupToken = (source) => {\n  let searchData = setupCredentials(source); //Object containing the required clientID and secret\n  let token = \"\"; //Variable used to hold access token from source platform\n\n  //Get the access token from the right api based on the source\n  if (source === \"spotify\") {\n    token = fetchSpotifyToken(searchData);\n  } else if (source === \"apple\") {\n    token = fetchAppleToken(searchData);\n  }\n\n  return { ...searchData, token };\n};\n"]},"metadata":{},"sourceType":"module"}